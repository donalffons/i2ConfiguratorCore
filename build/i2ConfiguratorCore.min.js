"use strict";class i2DatabaseObject{constructor(){this.data=null}}let scriptFile=document.getElementsByTagName("script")[document.getElementsByTagName("script").length-1].src,scriptDir=scriptFile.substring(0,scriptFile.lastIndexOf("/")+1);class i2Database{constructor(){this.PHPFile=scriptDir+"i2Database.php"}POSTDatabase(e,t){let o=this.PHPFile;$.ajax({url:o,type:"POST",data:e,dataType:"json",success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(a){console.error("Error POSTing to "+o+"!\nWith data: "+JSON.stringify(e)+"\nServer responded with: "+a.status+" ("+a.statusText+")\nServer responseText: "+a.responseText),void 0!==t&&void 0!==t.error&&t.error(a)},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}getModels(e){this.POSTDatabase({api:"getModels"},{success:function(t){void 0!==e&&void 0!==e.success&&e.success(t)},error:function(t){void 0!==e&&void 0!==e.error&&e.error(t),console.error("Cannot getModels")},complete:function(){void 0!==e&&void 0!==e.complete&&e.complete()}})}getModelByID(e,t){this.POSTDatabase({api:"getModelByID",id:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot getModelByID")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}getModelByPath(e,t){this.POSTDatabase({api:"getModelByPath",path:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot getModelByPath")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}getModelsByName(e,t){this.POSTDatabase({api:"getModelsByName",name:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot getModelsByName")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}createNewModelID(e){this.POSTDatabase({api:"createNewModelID"},{success:function(t){void 0!==e&&void 0!==e.success&&e.success(t)},error:function(t){void 0!==e&&void 0!==e.error&&e.error(t),console.error("Cannot createNewModelID")},complete:function(){void 0!==e&&void 0!==e.complete&&e.complete()}})}saveModel(e,t){this.POSTDatabase({api:"saveModel",model:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot saveModel")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}get3DFilesByModelID(e,t){this.POSTDatabase({api:"get3DFilesByModelID",id:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot get3DFilesByModelID")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}deleteModelByID(e,t){this.POSTDatabase({api:"deleteModelByID",id:e},{success:function(){void 0!==t&&void 0!==t.success&&t.success()},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot deleteModelByID")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}getVariantsByModelID(e,t){this.POSTDatabase({api:"getVariantsByModelID",id:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot getVariantsByModelID")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}getVariantByID(e,t){this.POSTDatabase({api:"getVariantByID",id:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot getVariantByID")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}getVariantsByName(e,t){this.POSTDatabase({api:"getVariantsByName",name:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot getVariantsByName")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}createNewVariantID(e){this.POSTDatabase({api:"createNewVariantID"},{success:function(t){void 0!==e&&void 0!==e.success&&e.success(t)},error:function(t){void 0!==e&&void 0!==e.error&&e.error(t),console.error("Cannot createNewVariantID")},complete:function(){void 0!==e&&void 0!==e.complete&&e.complete()}})}saveVariant(e,t){this.POSTDatabase({api:"saveVariant",variant:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot saveVariant")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}deleteVariantByID(e,t){this.POSTDatabase({api:"deleteVariantByID",id:e},{success:function(){void 0!==t&&void 0!==t.success&&t.success()},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot deleteVariantByID")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}getActionsByVariantID(e,t){this.POSTDatabase({api:"getActionsByVariantID",id:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot getActionsByVariantID")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}getActionByID(e,t){this.POSTDatabase({api:"getActionByID",id:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot getActionByID")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}getActionsByName(e,t){this.POSTDatabase({api:"getActionsByName",name:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot getActionsByName")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}createNewActionID(e){this.POSTDatabase({api:"createNewActionID"},{success:function(t){void 0!==e&&void 0!==e.success&&e.success(t)},error:function(t){void 0!==e&&void 0!==e.error&&e.error(t),console.error("Cannot createNewActionID")},complete:function(){void 0!==e&&void 0!==e.complete&&e.complete()}})}saveAction(e,t){this.POSTDatabase({api:"saveAction",action:e},{success:function(e){void 0!==t&&void 0!==t.success&&t.success(e)},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot saveAction")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}deleteActionByID(e,t){this.POSTDatabase({api:"deleteActionByID",id:e},{success:function(){void 0!==t&&void 0!==t.success&&t.success()},error:function(e){void 0!==t&&void 0!==t.error&&t.error(e),console.error("Cannot deleteActionByID")},complete:function(){void 0!==t&&void 0!==t.complete&&t.complete()}})}}let i2DatabaseDefault=new i2Database;class i2Action extends i2DatabaseObject{constructor(e){super(e),this.data={},this.data.id=null,this.data.name=null,this.data.idvariant=[],this.data.type=null,this.data.action=null}setID(e){this.data.id=e}getID(){return this.data.id}setName(e){this.data.name=e}getName(){return this.data.name}setType(e){this.data.type=e}getType(){return this.data.type}setAction(e){this.data.action=e}getAction(){return this.data.action}setVariantIDs(e){this.data.idvariant=e}getVariantIDs(){return this.data.idvariant}addVariantID(e){this.data.idvariant.indexOf(e)>-1||(this.data.idvariant[this.data.idvariant.length]=e)}removeVariantID(e){var t=this.data.idvariant.indexOf(e);t>-1&&this.data.idvariant.splice(t,1)}async save(){return new Promise((e,t)=>{i2DatabaseDefault.saveAction(this.data,{success:t=>{this.data=t,e()},error:function(e){t(e)}})})}async delete(){return new Promise((e,t)=>{i2DatabaseDefault.deleteActionByID(this.data.id,{success:()=>{delete this.data,e()},error:function(e){t(e)}})})}}class i2Model extends i2DatabaseObject{constructor(){super(),this.data={},this.data.id=null,this.data.name=null,this.data.path=null}setID(e){this.data.id=e}getID(){return this.data.id}setName(e){this.data.name=e}getName(){return this.data.name}getPath(){return this.data.path}async save(){return new Promise((e,t)=>{i2DatabaseDefault.saveModel(this.data,{success:t=>{this.data=t,e()},error:function(e){t(e)}})})}async delete(){return new Promise((e,t)=>{i2DatabaseDefault.deleteModelByID(this.data.id,{success:()=>{delete this.data,e()},error:function(e){t(e)}})})}async get3DFiles(){return new Promise((e,t)=>{i2DatabaseDefault.get3DFilesByModelID(this.data.id,{success:t=>{e(t)},error:function(e){t(e)}})})}getVariants(){return i2VariantBuilder.getVariantsByModelID(this.data.id)}}class i2Variant extends i2DatabaseObject{constructor(e){super(e),this.data={},this.data.id=null,this.data.name=null,this.data.idmodel=[]}setID(e){this.data.id=e}getID(){return this.data.id}setName(e){this.data.name=e}getName(){return this.data.name}setModelIDs(e){this.data.idmodel=e}getModelIDs(){return this.data.idmodel}addModelID(e){this.data.idmodel.indexOf(e)>-1||(this.data.idmodel[this.data.idmodel.length]=e)}removeModelID(e){var t=this.data.idmodel.indexOf(e);t>-1&&this.data.idmodel.splice(t,1)}async save(){return new Promise((e,t)=>{i2DatabaseDefault.saveVariant(this.data,{success:t=>{this.data=t,e()},error:function(e){t(e)}})})}async delete(){return new Promise((e,t)=>{i2DatabaseDefault.deleteVariantByID(this.data.id,{success:()=>{delete this.data,e()},error:function(e){t(e)}})})}getActions(){return i2ActionBuilder.getActionsByVariantID(this.data.id)}}class i2ActionBuilder{static createNewAction(){return new Promise((e,t)=>{i2DatabaseDefault.createNewActionID({success:function(t){let o=new i2Action;o.setID(t),e(o)},error:function(e){t(e)}})})}static getActionsByVariantID(e){return new Promise((t,o)=>{i2DatabaseDefault.getActionsByVariantID(e,{success:function(e){let o=[];for(let t=0;t<e.length;t++)o[t]=new i2Action,o[t].data=e[t];t(o)},error:function(e){o(e)}})})}static getActionsByName(e){return new Promise((t,o)=>{i2DatabaseDefault.getActionsByName(e,{success:function(e){let o=[];for(let t=0;t<e.length;t++)o[t]=new i2Action,o[t].data=e[t];t(o)},error:function(e){o(e)}})})}static getActionByID(e){return new Promise((t,o)=>{i2DatabaseDefault.getActionByID(e,{success:function(e){let o=new i2Action;o.data=e,t(o)},error:function(e){o(e)}})})}}class i2ModelBuilder{static createNewModel(){return new Promise((e,t)=>{i2DatabaseDefault.createNewModelID({success:function(t){let o=new i2Model;o.setID(t),e(o)},error:function(e){t(e)}})})}static getModelByID(e){return new Promise((t,o)=>{i2DatabaseDefault.getModelByID(e,{success:function(e){let o=new i2Model;o.data=e,t(o)},error:function(e){o(e)}})})}static getModelByPath(e){return new Promise((t,o)=>{i2DatabaseDefault.getModelByPath(e,{success:function(e){let o=new i2Model;o.data=e,t(o)},error:function(e){o(e)}})})}static getModelsByName(e){return new Promise((t,o)=>{i2DatabaseDefault.getModelsByName(e,{success:function(e){let o=[];for(let t=0;t<e.length;++t)o[t]=new i2Model,o[t].data=e;t(o)},error:function(e){o(e)}})})}}class i2VariantBuilder{static createNewVariant(){return new Promise((e,t)=>{i2DatabaseDefault.createNewVariantID({success:function(t){let o=new i2Variant;o.setID(t),e(o)},error:function(e){t(e)}})})}static getVariantsByModelID(e){return new Promise((t,o)=>{i2DatabaseDefault.getVariantsByModelID(e,{success:function(e){let o=[];for(let t=0;t<e.length;t++)o[t]=new i2Variant,o[t].data=e[t];t(o)},error:function(e){o(e)}})})}static getVariantsByName(e){return new Promise((t,o)=>{i2DatabaseDefault.getVariantsByName(e,{success:function(e){let o=[];for(let t=0;t<e.length;t++)o[t]=new i2Variant,o[t].data=e[t];t(o)},error:function(e){o(e)}})})}static getVariantByID(e){return new Promise((t,o)=>{i2DatabaseDefault.getVariantByID(e,{success:function(e){let o=new i2Variant;o.data=e,t(o)},error:function(e){o(e)}})})}}